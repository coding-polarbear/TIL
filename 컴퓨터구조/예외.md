# 예외
* 예외(exception)과 인터럽트 (interrupt)
  * 분기 명령어나 점프 명령어가 아니면서 명령어 실행의 정상적인 흐름을 바꾸는 사건
  * 처음에는 프로세서 내부의 예상치 못했던 사건 (오버플로 등) 처리용
  * Intel x86은 인터럽트라는 용어만 사용
* MIPS의 용어
  * 예외 : 데어 흐름에서 예기치 못한 변화를 모두 지칭
  * 인터럽트 : 그 중 프로세서 외부적인 요인으로 발생한 것만 지칭

| 사건 종류 | 근원지 | MIPS 용어 |
| ----- | ----- | ----- |
| 입출력장치 요구 | 외부 | 인터럽트 |
| 사용자 프로그램의 운영체제 호출 | 내부 | 예외 |
| 산술 오버플로우 | 내부 | 예외 |
| 정의 안 된 명령어 사용 | 내부 | 예외 |
| 하드웨어 오작동 | 내부 / 외부 | 예외 또는 인터럽트 | 

## MIPS 구조의 예외 처리
1. 문제를 일으킨 명령어 주소 + 4를 저장
> MIPS는 예외 프로그램 카운터 (exception program counter, EPC) : PC + 4
2. 특정 주소의 운영체제로 제어 이동
* Read Cause register, and transfer to relevant handler

3. 운영체제가 적절한 작업 수행
* 사용자 프로그램에 서비스 제공
* 미리 정의된 작업으로 오버플로 처리
* 프로그램 실행을 중지하고 오류 보고
4. 운영체제가 프로그램을 끝내든지 아니면 실행을 재개
* 실행을 재개할 경우 EPC를 사용하여 시작 위치 결정

## 예외 원인의 판별
1. Non-vectored 인터럽트
   * 모든 인터럽트가 같은 인터럽트 핸들러 사용
   * 인터럽트 핸들러가 폴링(polling)으로 원인 파악
   * 해당 서비스 루틴으로 점프
2. Vectored 인터럽트
   * 인터럽트 요청 장치가 인터럽트 벡터를 CPU에 제공
   * CPU는 이를 이용하여 인터럽트 서비스 루틴의 주소 생성
   * 보통 인터럽트 벡터 테이블의 인덱스로 사용