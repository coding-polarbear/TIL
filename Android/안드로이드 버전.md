# 안드로이드 버전
> 안드로이드는 계속 발전해가고 있기 때문에 버전에 따라 많은 차이가 남

| 코드네임 | API 레벨 | 안드로이드 버전 |
| ------- | ------ | ---------------|
| 프로요 | 8 | 2.2 |
| 진저브레드 | 9 | 2.2 |
| 진저브레드 | 9 | 2.2 |
| 허니콤| 11 | 3.0 |
| 허니콤 | 12 | 3.1 |
| 허니콤 | 13 | 3.2 | 
| ICS (아이스크림 샌드위치) | 14 | 4.0 ~ 4.0.2 |
| ICS (아이스크림 샌드위치) | 15 | 4.0.3 ~ 4.0.4 |
| 젤리빈 | 16 | 4.1|
| 젤리빈 | 17 | 4.2 |
| 젤리빈 | 18 | 4.3 |
| 킷캣 | 19 | 4.4 ~ 4.4.2 |
| 킷캣 | 20 | 4.4.2 ~ 4.4.4 |
| 롤리팝 | 21 | 5.0 |
| 롤리팝 | 22 | 5.1 |
| 마시멜로 | 23 | 6.0 |
| 누가 | 24 | 7.0 |

### 호환성 모드
* 앱이 동작하는 안드로이드 버전을 지정하기 위해서는 `AndroidManifest.xml`에서 `uses-sdk` 항목에 `android:minSdkversion`과 `android:targetSdkVersion`에 버전을 명시해야함
* 단, 안드로이 스튜디오에서는 `build.gradle`에서 `AndroidManifest.xml`의 내용을 오버라이딩 할 때가 많음

##### targetSdkVersion은 반드시 지정
* targetSdkVersion을 명시하지 않으면 minSdkVersion과 동일한 값으로 지정
* targetSdkVersion을 지정한다는 것은 해당 버전까지는 테스트해서 앱을 실행하는데 문제가 없다는 으미ㅣ이고, 그 버전까지는 호환성모드를 사용하지 않겠다는 뜻
  
##### 호환성 모드의 동작
> 호환성 모드는 안드로이드 버전이 올라가더라도 앱의 기존 동작이 바뀌는 것을 방지하기 위한 것

##### targetSdkVersion은 가급적높게 지정
> 단말 버전에 따라 최신 기능을 쓸 수 있기 때문에 `targetSdkVersion`은 높게 쓰는 것이 권장됨

### 호환성 모드 동작 예시
##### AsyncTask 병렬 / 순차 실행
* 허니콤 이전에서는 `AsyncTask`에서 테스크를 실행하면 병렬실행되었지만, 허니콤부터는 순차실행으로 변경
* `targetSdkVersion`이 10 이하이면 안드로이드 버전이 4.x라고 하더라도 기존과 동일하게 병렬 실행으로 동작
* 이럴 경우 AsyncTask가 버전에 따라 다르게 동작하도록 코드를 작성해야함

##### 메인 스레드상에서 네트워크 통신
* 메인 스레드 상에서 네트워크 통신은 진저브레드 레벨 9까지 허용됨
* 이후 버전에서는 `NetworkOnMainThreadException`이 발생

##### 하드웨어 가속
* 하드웨어 가속 (hardware acceleration)은 GPU를 가지고 View에서 Canvas에 그리는 작업을 하는 것
* `targetSdk` 14 이상이면 디폴트 옵션

##### 앱 위젯 기본 패팅
* `targetSdkVersion`이 14 이상일 때는 앱 위젯에 기본 팯이이 존재
* `targetSdkVersion`이 올라가게 되면 기본 패딩때문에 앱 위젯의 실제 사이즈는 기본보다 작아짐

##### 명시적 인텐트로 서비스 시작
* `targetSdkVersion`이 `21` 이상일 때는 `startService()`나 `bindService()` 메소드를 실행할 때 명시적 인텐트를 사용해야 함
* `targetSdkVersion`이 `20` 이하이면 예외가 발생하지 않고 문제 없이 실행됨

### 단말 버전 체크

##### targetSdkVersion과 compileSdkVersion
* `compileSdkVersion`은 컴파일 시에 사용할 버전을 정하는 것
* `compileSdkVersion`은 `targetSdkVersion`과 동일하거나 그 이상으로 정하는 경우가 많음

##### 버전 체크 필요
> 높은 버전의 단말에서 새로 추가된 기능을 활용할 때, 그대로 컴파일해서 실행하면 기존 단말에서는 크래시가 발생하기 때문에, 버전에 따른 분기가 있어야 함


##### 크래시 방지
* 버전을 체크하는 코드는 최신 버전의 기능을 활용하는 것과 크래시를 방지하는 두 가지 의미가 있음
* 앱 개발시에는 `compileSdkVersion`을 높은 버전으로 지정하고 단말의 버전이 높다면 최신 기능의 기존 메서드를 사용하고 그렇지 않으면 부족한 기능의  기존 메소드로 대체
* 크래시를 방지하는 효과가 있음

##### support 패키지와 -Compat  클래스의 사용
> 버전에 따른 기능 문제를 해결