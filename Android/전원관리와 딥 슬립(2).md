# 전원관리와 딥 슬립 (2)
## USB 충전 중일 때는 딥 슬립에 들어가지 않음.
* 개발 중에는 USB 디버깅 옵션을 켜고 PC와 연결해서 사용하는데, USB 충전중에는 딥슬립에 들어가지 않음.
* 전원이 잘 공급되고 있기 때문에 잠에 빠질 필요가 없는 것.

## 딥 슬립으로 인한 문제 해결 방법 (백그라운드 작업)
* 딥 슬립으로 실행이 지연되는 경우 일반적인 해결방법은 `AlarmManager`를 쓰는 것
* 지연 시간도 잘 맞추어서 깨워주고 딥 슬립에도 문제가 없음.
* `PendingIntent`를 만들어서 `AlarmManager`에 전달하고, `RTC_WAKEUP` 옵션을 사용하여 딥 슬립에서 깨어나도록 함.

## 딥 슬립으로 인해 UI가 갱신되지 않는 문제 해결
* 반복해서 UI를 갱신하는 케이스는 `AlarmManager`로 해결하기엔 오히렬 복잡함.
* 생각할 수 있는 가장 단순한 방법은 `onResume()`에서 기존 지연(`delayed`) Message를 제거하고 새로 실행하는 것
*  화면이 켜지면서 딥슬립에서 깨어날때 UI를 갱신해주는 것이 맞음.
*  그러나 갱신하지 않을 때에도 굳이 갱신할 필요는 없기 때문에, 화면이 ON 되었을 때 지역시간이 지났으면 화면을 업데이트 하는 식으로 사용함.

## 딥 슬립에서 깨어나기
* 딥 슬립 상태는 기본적으로 인터럽트에 의해서 깨어남.
* 딥 슬립을 인터럽트하는 장치들은 항상 웨이크업 상태.
* 단말에서 웨이크업 상태의 장치는 일반적으로 4가지 정도를 이야기함.

1. 전원 키를 눌러 화면을 ON시키면 잠에서도 깨어남.
2. 단말이 아무리 깊은 잠에 빠져 있어도 전화나 문자자가 오면 받아야 하기 때문에 전화 관련 모듈은 웨이크업 상태.
3. `AlarmManager`를 통해 `Alarm`을 등록함. RTC에 의해서 알람이 시작됨.
4. `GCM(Google Cloud Messaging)`은 소켓을 통해 메시지를 받고, 잠에서 깨어나 메시지를 처리함.