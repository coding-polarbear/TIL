# 프로세스 분리
* 앱 프로세스는 사용 가능한 메모리에 제한이 있음.
* 안드로이드 버전 별로 메모리 제한에 차이가 있고, 단말별로도 다름.
* 허니컴부터는 `android:largeHeap` 옵션도 쓸 수 있지만 단말에 따라서 이 옵션이 소용이 없는 경우도 있고 (제조사별로 차이가 있음), 이 옵션으로 인해 GC 시간이 오래 걸리거나 다른 앱의 실행에 악영향을 줄 수도 있음.

## 프로세스 분리 설정
* 메모리 제한 때문에 앱의 실행에 문제가 있다면 앱은 프로세스를 분리할 수 있음.
* 프로세스를 분리하는 것은 각 컴포넌트별로 가능함.
* 프로세스를 분리하려면 `AndroidManifest.xml`에서 `android:process` 속성을 사용해 별도의 프로세스명을 지정하면 됨.
* 일반적으로 속성에서느 `:remote`와 같이 콜론을 사용함.
* 액티비티, 서비스, 콘텐트 프로바이더, 브로드캐스트 리시버 모두 프로세스를 분리하는게 가능함.
* 하나의 앱에서 생성된 별도의 프로세스는 pid(`process id`)는 다르지만, 동일한 uid(`user id`)를 가지기 때문에 권한 문제 없이 앱의 파일과 리소스에 접근할 수 있음.

## 프로세스 분리가 필요할 때
* 액티비티 자체가 메모리를 많이 사용하는 경우
* 액티비티가 메모리를 많이 사용하지 않지만 동시에 서비스에서 백그라운드 스레드로 작업이 진행됨으로 인해 `Out Of Memory Exception`이 발생하는 경우
* 앱 위젯의 사이즈가 클때 (4x4, 5x5 등)

## 분리된 프로세스에서 Application은 새로 시작
* 컴포넌트의 프로세스를 분리하면 `Application`은 각 프로세스마다 새로 시작됨.
* 프로세스가 달라지면 `Zygote`에 의해 포크된 이후 `ActivityThread`를 새로 시작하고 `Application`을 새로 생성함.
* 컴포넌트가 프로세스 분리되어 있더라도 `Application`만은 어느 프로세스에서도 한번은 실행되어야 함.