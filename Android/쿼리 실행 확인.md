# 쿼리 실행 확인
* 일반적으로 쿼리 속도를 체크하기 위해서 코드상에 쿼리 실행 전후 시간 차이를 로그로 남겨서 확인함.
* 이 방식도 개발 중에 쿼리 속도를 확인할 때는 유용하지만, 갭라이 완료되면 불필요한 로깅 코드로 남게 됨

## dumpsys dbinfo를 이용하여 속도 확인
* `adb shell`에서 `dumpsys dbinfo`를 하면 DB별로 최근 쿼리 실행 속도와 바인드된 파라미터(bindArgs)를 확인할 수 있음. 
* 가장 최근 것 부터 나오므로 밑에서부터 시간순으로 보면 됨.
* 쿼리를 `prepare` 하고 `execute`하는 것을 확인할 수 있음.
* `dumpsys dbinfo` 명령어도 모든 앱의 DB 히스토리를 전부 출력하기 때문에 내용이 많음.
* dbinfo에 쓸 수 있는 옵션에는 pid가 있음.
* 만약 특정 패키지의 DB 쿼리 내용을 알고 싶다면 grep을 이용하여 pid를 알아낸 다음 `dumpsys dbinfo 1004` 이런식으로 사용하면 됨.

## 실행 순서 확인
* `dumpsys dbinfo` 명령어는 쿼리 실행 속도를 확인하는 것뿐 아니라 쿼리가 원하는 시점에 실행되는지 확인하는 데에도 쓰일 수 있음.
* DB 락 문제를 해결하기 위해서 `SQLiteDatabase`를 단일 인스턴스로 사용한다면, 여러 스레드에서 쿼리가 실행되더라도 결국 하나씩만 실행됨.
* 여러 스레드 간에서는 어느 스레드가 먼저 실행될지 알 수 없기 때문에, 각각 쿼리를 실행하면 쿼리 실행 순서는 예측할 수 없음.
* 요구 사항에 의해 먼저 실행되어야 하는 쿼리가 있는데 가끔 늦어지는 경우가 생긴다면 `dumpsys dbinfo`로 실행 순서를 확인할 필요가 있음.